%%% стандартни пакети

% поддръжка на български език
\usepackage[T2A]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,bulgarian]{babel}
\deftranslation[to=bulgarian]{Definition}{Дефиниция}
\deftranslation[to=bulgarian]{Theorem}{Теорема}

% поддръжка на Text Companion шрифтове
% използват се за апострофи и кавички
\usepackage{textcomp}

% хоризонтално центриране на клетки с фиксирана ширина
\usepackage{array}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
 
% правене на нови команди
\usepackage{makecmds}

% избягване на предупреждения за неподдържани символи от hyperref
\hypersetup{unicode=true}

% поддръжка на линкове
\usepackage{hyperref}

% коментари
\usepackage{comment}

% зачертан текст
\usepackage{soul}

% вертикално подравняване на \includegraphics
\usepackage[export]{adjustbox}

% математически символи
\usepackage{amsmath}

% двойни разделителни черти в таблици
\usepackage{hhline}

% вертикално сливане на клетки от повече от един ред
\usepackage{multirow}

% цветни таблици
\usepackage{colortbl}

% умно разстояние на края на LaTeX команди
\usepackage{xspace}

% пакет за смятане
\usepackage{fp}

% листинги
\usepackage{listings}
\lstset{language=c++,
        basicstyle=\ttfamily,
        columns=fullflexible,
        keywordstyle=\color{blue},
        extendedchars=false,
        texcl=true,
        escapechar=@,
        showstringspaces=false,
        keepspaces=true}

% съкратена команда за показване само на текущия слайд
% слага се в преамбюла
\newcommand{\crronly}{\includeonlyframes{current}}

% смаляване на шрифта в листинг
\newcommand{\lstsize}[1]{\lstset{basicstyle=#1\ttfamily}}
\newcommand{\lstsmall}{\lstsize\small}
\newcommand{\lstscriptsize}{\lstsize\scriptsize}
\newcommand{\lstfootnotesize}{\lstsize\footnotesize}
\newcommand{\lsttiny}{\lstsize\tiny}

% декларативна графика
\usepackage{tikz}
\usetikzlibrary{shapes.misc}
\usetikzlibrary{shapes.geometric}
\usetikzlibrary{positioning}
\usetikzlibrary{graphs}
\usetikzlibrary{matrix}
\usetikzlibrary{overlay-beamer-styles}

% стил за блох-схеми
\tikzset{
    base/.style={minimum height=2em,draw=black,fill=diagramblue},
    entry/.style={base,rounded rectangle},
    io/.style={base,trapezium,trapezium stretches=true,trapezium left angle=60,trapezium right angle=120,inner sep=0.5ex},
    op/.style={base,rectangle},
    cond/.style={base,diamond},
    point/.style={coordinate}
}

\newcommand{\arrowto}[3]{
  \node (x) [#3=of #1] {#2};
  \draw[l] (x) -> (#1);
}


%%% кратки команди за форматиране

% код
\renewcommand{\tt}{\texttt}

% код в червено
\newcommand{\tta}[1]{\tt{\alert{#1}}}

% зачертан код в червено
\newcommand{\sta}[1]{\tta{\st{#1}}}

% код с форматиране
\newcommand{\lst}{\lstinline}

% по-приличен \pause (за математика и таблици)
\newcommand{\nxt}[1]{\visible<+->{#1}}

% \pause за таблици
\newcommand{\tpause}{\noalign{\pause}}

% син цвят по подразбиране
\colorlet{diagramblue}{blue!60!green!40}

% синьозелен цвят по подразбиране
\colorlet{diagramnavy}{blue!40!green!60}

% еквивалентно на
\newcommand{\eqv}{$\Longleftrightarrow$\xspace}

\usepackage[type={CC}, modifier={by-nc-sa}, version={4.0}, imagemodifier={-eu}]{doclicense}

%%% настройки общи за всички слайдове
\mode<presentation>
{
  \usetheme{CambridgeUS}
  \usecolortheme{dolphin}
}
\author{Трифон Трифонов}
\institute[УП 21/22]{\small Увод в програмирането,\\
спец. Компютърни науки, 1 поток, 2021/22 г.}
\subject{LectureSlides}

% инжектиране на специфична графика за слайда
\def\@titlegraphicx{}
\newcommand{\titlegraphicx}[1]{\def\@titlegraphicx{#1}}

\titlegraphic{\scalebox{.45}{\textcolor{gray}{Тази презентация е достъпна под лиценза \href{\doclicenseURL}{Creative Commons Признание-Некомерсиално-Споделяне на споделеното 4.0 Международен \doclicenseIcon}}}\\[1ex]
\@titlegraphicx}


%%% среди

% таблица от битове
\newenvironment{bittable}{%
  \setlength{\tabcolsep}{4pt}
  \begin{tabular}{*9c}
}{%
  \end{tabular}
}

% факт
\theoremstyle{definition}
\newtheorem{afact}{Факт}

% overlayarea, която по подразбиране изпълва цялата област за текст за текущата тема
% може да се зададе като опционален параметър друга част от височината
\newenvironment{fixedarea}[1][.87]{%
  \begin{overlayarea}\textwidth{#1\textheight}}{%
  \end{overlayarea}}

%%% макроси

% цитиране на картинки
\newcommand{\imgcite}[1]{\raggedleft\tiny\textcolor{lightgray}{#1}}

% цитиране на wikipedia
\newcommand{\wiki}{\imgcite{Изображения: wikipedia.org}}

% обикновени кавички
\newcommand{\quot}{\textquotedbl}

% обикновен апостроф
\newcommand{\apos}{\textquotesingle}

% терминиращ символ
\newcommand{\term}{\tt{'\textbackslash0'}}

% пример
\newcommand{\exa}{\textbf{Пример:}\xspace}

%% диаграми

% покажи засивен текст
\newcommand{\gc}[2]{\onslide<#1>{\textcolor{gray}{#2}}}

% откриване на въпрос
\newcommand{\rvl}[1]{\alt<+->{#1}?}

% голяма стрелка нагоре (указател)
\newcommand{\bua}{\bigg\uparrow}

% голяма стрелка надолу (указател)
\newcommand{\bda}{\bigg\downarrow}

% голяма стрелка надясно (указател)
\newcommand{\bra}{\xrightarrow{\hspace{5ex}}}

% голяма стрелка наляво (указател)
\newcommand{\bla}{\xleftarrow{\hspace{5ex}}}

% creative commons признание
\newcommand{\imageUntitledAttr}[4][.4]{\scalebox{#1}{\textcolor{lightgray}{От #2 (\url{#3}), #4}}}
\newcommand{\imageAttr}[5][.4]{\scalebox{#1}{\textcolor{lightgray}{``#2'' от #3 (\url{#4}), #5}}}
\newcommand{\imageBased}[5][.4]{\scalebox{#1}{\textcolor{lightgray}{Базирано на ``#2'' от #3 (\url{#4}), #5}}}

\usepackage{anyfontsize}
\usepackage{copyrightbox}
\makeatletter
\renewcommand{\CRB@setcopyrightfont}{%
  \fontseries{m}\fontshape{it}\fontsize{3}{3}\selectfont
  \color{gray!40}
}
\makeatother

\newcommand{\imageWithAttrX}[8]{\copyrightbox[b]{\href{#7}{\hspace{#2}\includegraphics[width=#3]{#4}\hspace{#2}}}{#1``\href{#7}{#5}'' от #6, #8}}
\newcommand{\imageWithAttr}[1][0pt]{\imageWithAttrX{}{#1}}
\newcommand{\basedOnImageWithAttr}[1][0pt]{\imageWithAttrX{Базирано на }{#1}}
\newcommand{\untitledImageWithAttr}[6][0pt]{\copyrightbox[b]{\href{#5}{\hspace{#1}\includegraphics[width=#2]{#3}\hspace{#1}}}{От \href{#5}{#4}, #6}}

\newcommand{\CCBY}[1]{\href{https://creativecommons.org/licenses/by/#1/}{CC~BY~#1}}
\newcommand{\CCBYSA}[1]{\href{https://creativecommons.org/licenses/by-sa/#1/}{CC~BY~SA-#1}}
\newcommand{\CCBYNC}[1]{\href{https://creativecommons.org/licenses/by-nc/#1/}{CC~BY-NC~#1}}
\newcommand{\CCBYNCND}[1]{\href{https://creativecommons.org/licenses/by-nc-nd/#1/}{CC~BY-NC-ND~#1}}
\newcommand{\PDWC}[1]{Обществено достояние чрез Общомедия}
\newcommand{\CCZWC}[1]{\href{https://creativecommons.org/publicdomain/zero/1.0/}{CC0} чрез Общомедия}
